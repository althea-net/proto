# Proto
Your one-stop-shop for all the compiled Rust protos used by Althea and Gravity Bridge.

This project was heavily inspired by github.com/cosmos/cosmos-rust, in particular the proto-build folder.

# Compiled Rust Protos
The following folders receive the compiled Rust code generated by [tonic-build](https://crates.io/crates/tonic-build) and [prost-build](https://crates.io/crates/prost-build):
althea_proto: https://crates.io/crates/althea_proto  
cosmos_sdk_proto: https://crates.io/crates/cosmos_sdk_proto_althea  
gravity_proto: https://crates.io/crates/gravity_proto  

# Dependency folders
The following folders are used as a source for protobuf files, using a special git submodule checkout configuration to avoid needless source code duplication (see [Adding a new dependency](#adding-a-new-dependency)). 

althea-chain: https://github.com/althea-net/althea-chain  
bech32-ibc: https://github.com/althea-net/althea-chain  
cosmos-sdk: https://github.com/althea-net/althea-chain  
gravity: https://github.com/althea-net/althea-chain  

## Adding a new dependency
With git it is possible to check out only certain branches and directories from another git repository.
1. git clone --depth=1 --no-checkout https://github.com/org/repo.git ./repo
1. cd repo && git checkout commit-ish && cd ..
1. git submodule add https://github.com/org/repo.git ./repo
1. git submodule absorbgitdirs
1. git -C repo config core.sparseCheckout true
1. `echo 'folder-to-include/*' >> .git/modules/repo/info/sparse-checkout`
1. git submodule update --force --checkout repo

## Updating a dependency to a new version
With a desired tag, branch, or commit hash run the following
1. cd dependency
1. git fetch origin <tag, branch, hash>
1. git checkout <tag, branch, hash>
